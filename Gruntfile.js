'use strict';

module.exports = function(grunt) {

	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Dependencies
	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	grunt.loadNpmTasks('grunt-bookmarklet-thingy');
	grunt.loadNpmTasks('grunt-contrib-watch');
	grunt.loadNpmTasks('grunt-wakeup');


	grunt.initConfig({

		//----------------------------------------------------------------------------------------------------------------------------------------------------------
		// Bookmarklet
		//----------------------------------------------------------------------------------------------------------------------------------------------------------
		bookmarklet: {
			generate: {
				// js: ['http://code.jquery.com/jquery-1.11.2.min.js'],
				body: 'dev/gridly.js',
				out: 'prod/bookmarklet.js',
				amdify: false,
			},
		},


		//----------------------------------------------------------------------------------------------------------------------------------------------------------
		// Wakeup
		//----------------------------------------------------------------------------------------------------------------------------------------------------------
		wakeup: {
			wakeme: {},
		},


		//----------------------------------------------------------------------------------------------------------------------------------------------------------
		// watch for changes
		//----------------------------------------------------------------------------------------------------------------------------------------------------------
		watch: {
			All: {
				files: [
					'dev/**/*',
				],
				tasks: [
					'build',
				],
			},
		},

	});



	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Tasks
	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	grunt.registerTask('build', [
		'bookmarklet',
		'wakeup',
	]);

	grunt.registerTask('default', ['build', 'watch']);
};